# Milestone v1.0: runtime-hardening

**Status:** âœ… SHIPPED 2026-02-25
**Phases:** 1-4
**Total Plans:** 11

## Overview

The v1.0 runtime-hardening milestone delivered a deterministic, operator-safe Cobalt Strike Docker workflow with strict preflight validation, startup sequencing guarantees, mount/platform resilience, shell regression coverage, and CI enforcement with a dedicated troubleshooting runbook.

## Phases

### Phase 1: Contract and Security Baseline

**Goal**: Establish hard boundaries for required config, secret handling, and secure default exposure.
**Depends on**: Nothing (first phase)
**Plans**: 3/3 plans complete

Plans:
- [x] 01-01: Validate and normalize configuration/security contract boundaries
- [x] 01-02: Implement secret-safe output and scanning guardrails
- [x] 01-03: Align runtime defaults and contract documentation

### Phase 2: Startup Determinism and Diagnostics

**Goal**: Ensure startup order, readiness checks, and failure handling are deterministic and operator-actionable.
**Depends on**: Phase 1
**Plans**: 3/3 plans complete

Plans:
- [x] 02-01: Harden startup validation and failure semantics
- [x] 02-02: Strengthen readiness/liveness probes and branch behavior
- [x] 02-03: Improve startup diagnostic output and verification guidance

### Phase 3: Mount/Platform Resilience with Regression Tests

**Goal**: Make mount/platform behavior reliable and codify critical runtime branches in automated tests.
**Depends on**: Phase 2
**Plans**: 3/3 plans complete

Plans:
- [x] 03-01: Harden mount and platform variance handling
- [x] 03-02: Add shell regression tests for preflight and mount branches
- [x] 03-03: Add startup sequencing/readiness regression tests

### Phase 4: CI Enforcement and Operator Runbook

**Goal**: Enforce reliability checks continuously and ship a clear troubleshooting runbook.
**Depends on**: Phase 3
**Plans**: 2/2 plans complete

Plans:
- [x] 04-01: Wire CI gates for shell/runtime contract checks
- [x] 04-02: Finalize operator troubleshooting and verification docs

---

## Milestone Summary

**Key Accomplishments:**
- Environment contract now has a maintained template and explicit fail-fast required-key remediation path.
- Entrypoint startup flow now uses deterministic gate helpers with explicit non-zero failure branches for startup process-exit races.
- Launcher mount/platform behavior now emits deterministic branch diagnostics and resilient host target selection across platform variance.
- Startup sequencing/readiness branches are now covered by deterministic shell regression tests keyed to `STARTUP[...]` marker order and failure paths.
- Pull-request reliability gates now enforce runtime contract checks with deterministic, fork-safe CI jobs.
- Operator troubleshooting is now centralized in a dedicated runbook with command-level triage for runtime and CI failures.

**Key Decisions:**
- Keep REST API localhost-scoped by default with explicit override.
- Standardize deterministic `STARTUP[...]` markers for startup lifecycle diagnosis.
- Require shell regression tests as the contract safety baseline before CI enforcement.
- Keep troubleshooting guidance canonical in `docs/TROUBLESHOOTING.md` with README/AGENTS pointers.

**Issues Resolved:**
- Missing strict validation for startup control ports/booleans.
- Non-deterministic diagnostics across mount and startup branches.
- Lack of CI enforcement for shell/runtime contract checks.

**Issues Deferred:**
- Branch protection automation/API changes.
- Multi-OS CI matrix expansion beyond `ubuntu-latest`.
- Additional static-analysis expansion (for example `shellcheck` policy rollout).

**Technical Debt Incurred:**
- None recorded as blocking debt for v1.0 closeout.

---
_For current project status, see `.planning/ROADMAP.md`._
