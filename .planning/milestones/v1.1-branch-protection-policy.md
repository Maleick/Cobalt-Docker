# v1.1 Branch Protection Policy Contract

## Scope

This document defines the Phase 5 governance policy baseline for protected branches and merge gates.

## Protected Branch Scope

Protected branch targets for this milestone are:

- `master`
- `release/**`

Coverage expectations:

- Both targets must enforce the same required status check set.
- Both targets must enforce the same pull-request review governance defaults.
- Any change to target patterns is a contract change and must be updated in this file.

## Required Status Check Matrix

Required checks are pinned exactly to these names:

- `runtime-reliability / syntax-checks`
- `runtime-reliability / shell-regression-suite`
- `runtime-reliability / secret-scan`

| Branch Target | Required Checks |
|---|---|
| `master` | `runtime-reliability / syntax-checks`, `runtime-reliability / shell-regression-suite`, `runtime-reliability / secret-scan` |
| `release/**` | `runtime-reliability / syntax-checks`, `runtime-reliability / shell-regression-suite`, `runtime-reliability / secret-scan` |

Check naming policy:

- Workflow job renames are contract changes and must be reflected in this document before policy enforcement updates.

## Review Governance Defaults

### Approval Policy

- Minimum approvals: `1` approving review.
- Required approving review policy applies to both `master` and `release/**`.

### Stale Review Handling

- Dismiss stale approvals when new commits are pushed to the pull request.
- Require re-approval after new commits to preserve current-review intent.

### Conversation Resolution Gate

- Unresolved pull-request conversations block merge.
- Merge is permitted only after all required review conversations are resolved.

## Ruleset Compatibility

Branch protection remains the baseline enforcement surface for v1.1.

Ruleset compatibility mapping (for migration planning only):

- Protected branch target patterns map to ruleset target selectors.
- Required status checks map to required status checks in rulesets.
- Required pull-request review settings map to equivalent review-rule constraints.

Scope guardrail:

- v1.1 does not execute a ruleset-first rollout.
- v1.1 documents equivalence only to keep policy migration-safe.

## Phase Boundary and Deferred Items

Phase 5 scope stops at policy contract definition.

Phase 6 dependency notes (not implemented in Phase 5):

- `GOV-04`: direct-push and force-push exception policy.
- `AUD-01`: reproducible verification procedure (CLI/UI).
- `AUD-02`: emergency exception workflow and reconciliation checklist.

Out of scope in this phase:

- Exception execution paths.
- Verification runbook execution.
- Branch protection/ruleset rollout automation.
