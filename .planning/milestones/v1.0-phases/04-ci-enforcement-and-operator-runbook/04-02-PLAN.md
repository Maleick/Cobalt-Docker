---
phase: 04-ci-enforcement-and-operator-runbook
plan: 02
type: execute
wave: 2
depends_on:
  - 04-01
files_modified:
  - docs/TROUBLESHOOTING.md
  - README.md
  - AGENTS.md
autonomous: true
requirements:
  - DOC-02
user_setup: []
must_haves:
  truths:
    - A dedicated troubleshooting runbook covers startup, mount fallback, and health verification flows end-to-end.
    - Runbook maps each CI gate to local reproduction commands.
    - README and AGENTS consistently reference runbook as troubleshooting source of truth.
  artifacts:
    - docs/TROUBLESHOOTING.md
    - README.md
    - AGENTS.md
  key_links:
    - Runbook structure follows `Symptom -> Checks -> Fix commands`.
    - Quick validation command block aligns with enforced CI checks.
---

<objective>
Finalize operator troubleshooting documentation and contributor failure-triage guidance.

Purpose: satisfy DOC-02 with clear, reproducible runbook coverage for expected runtime failure flows.
Output: dedicated troubleshooting runbook with aligned README/AGENTS references.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/STATE.md
@.planning/phases/04-ci-enforcement-and-operator-runbook/04-CONTEXT.md
@.planning/phases/04-ci-enforcement-and-operator-runbook/04-RESEARCH.md
@.planning/phases/04-ci-enforcement-and-operator-runbook/04-01-PLAN.md

@README.md
@AGENTS.md
@scripts/scan-secrets.sh
@tests/run-shell-tests.sh
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dedicated troubleshooting runbook with fixed section coverage</name>
  <files>docs/TROUBLESHOOTING.md</files>
  <action>Create runbook with sections for Quick Validation, Startup Troubleshooting, Mount Fallback Troubleshooting, Health Verification Troubleshooting, and CI Failure Triage using `Symptom -> Checks -> Fix commands` format.</action>
  <verify>rg -n "Quick Validation|Startup Troubleshooting|Mount Fallback Troubleshooting|Health Verification Troubleshooting|CI Failure Triage|Symptom|Checks|Fix commands" docs/TROUBLESHOOTING.md</verify>
  <done>Runbook exists at required path with complete section coverage and command-driven triage flow.</done>
</task>

<task type="auto">
  <name>Task 2: Align README troubleshooting pointers to runbook source of truth</name>
  <files>README.md</files>
  <action>Add/update concise README pointer that directs troubleshooting and CI failure diagnosis to `docs/TROUBLESHOOTING.md`.</action>
  <verify>rg -n "docs/TROUBLESHOOTING.md|Troubleshooting Runbook" README.md</verify>
  <done>README consistently routes troubleshooting to dedicated runbook.</done>
</task>

<task type="auto">
  <name>Task 3: Align AGENTS documentation contract with runbook path and validation flow</name>
  <files>AGENTS.md</files>
  <action>Update AGENTS documentation and validation guidance to include the runbook path and ensure contributor instructions match CI/local reproduction workflow.</action>
  <verify>rg -n "TROUBLESHOOTING.md|runbook|Validation Commands" AGENTS.md</verify>
  <done>AGENTS contract references canonical runbook and expected verification flow.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Runbook sections and format match locked decisions
- [ ] README and AGENTS both point to runbook path
- [ ] Quick validation commands are accurate and reproducible
</verification>

<success_criteria>
- DOC-02 is satisfied with end-to-end troubleshooting documentation coverage.
- Contributor/operator triage path is explicit, consistent, and reproducible.
</success_criteria>

<output>
After completion, create `.planning/phases/04-ci-enforcement-and-operator-runbook/04-02-SUMMARY.md`
</output>
