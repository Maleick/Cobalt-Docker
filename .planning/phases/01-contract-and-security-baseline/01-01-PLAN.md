---
phase: 01-contract-and-security-baseline
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .env.example
  - cobalt-docker.sh
  - README.md
autonomous: true
requirements:
  - CONF-01
  - CONF-02
user_setup: []
must_haves:
  truths:
    - Operators can bootstrap `.env` from a maintained template containing required keys.
    - Launcher hard-fails with clear remediation when required keys are missing/empty.
  artifacts:
    - .env.example
    - cobalt-docker.sh
    - README.md
  key_links:
    - `.env.example` required keys match launcher preflight checks.
    - README preflight instructions match launcher behavior.
---

<objective>
Lock the baseline configuration contract so onboarding and preflight behavior are explicit and consistent.

Purpose: Remove ambiguity between template, launcher checks, and docs.
Output: Restored/validated `.env.example`, aligned preflight behavior, and synchronized README contract text.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/STATE.md
@.planning/phases/01-contract-and-security-baseline/01-CONTEXT.md
@.planning/phases/01-contract-and-security-baseline/01-RESEARCH.md

@cobalt-docker.sh
@README.md
@AGENTS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Reconcile `.env.example` with required contract keys</name>
  <files>.env.example</files>
  <action>Ensure `.env.example` exists and contains all required keys from the launcher contract, with safe placeholder values only. Include optional runtime keys currently documented and remove obsolete entries. Keep ordering readable (required keys first, then optional groups).</action>
  <verify>test -f .env.example && rg "^COBALTSTRIKE_LICENSE=" .env.example && rg "^TEAMSERVER_PASSWORD=" .env.example</verify>
  <done>Template exists, required keys are present exactly once, and placeholders contain no real secrets.</done>
</task>

<task type="auto">
  <name>Task 2: Tighten required-key preflight messaging in launcher</name>
  <files>cobalt-docker.sh</files>
  <action>Review and normalize preflight error messaging for missing/empty required keys so operators get clear remediation. Keep fail-fast behavior unchanged, avoid printing secret values, and preserve backward-compatible invocation semantics.</action>
  <verify>bash -n /opt/Cobalt-Docker/cobalt-docker.sh</verify>
  <done>Launcher exits early with explicit key-specific remediation and passes shell syntax validation.</done>
</task>

<task type="auto">
  <name>Task 3: Align README preflight section to enforced launcher behavior</name>
  <files>README.md</files>
  <action>Update preflight/setup content so instructions reflect actual launcher behavior for required keys and template usage. Keep examples minimal and safe, and explicitly state that missing required values block deployment.</action>
  <verify>rg -n "Required Preflight|COBALTSTRIKE_LICENSE|TEAMSERVER_PASSWORD|\.env\.example" README.md</verify>
  <done>README setup flow accurately mirrors launcher preflight and template contract.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `bash -n /opt/Cobalt-Docker/cobalt-docker.sh` passes
- [ ] `.env.example` required keys match launcher checks
- [ ] README preflight instructions match runtime behavior
</verification>

<success_criteria>
- Template and launcher required-key contract are synchronized.
- Operators can bootstrap config without hidden assumptions.
- Preflight failure messaging is explicit and secret-safe.
</success_criteria>

<output>
After completion, create `.planning/phases/01-contract-and-security-baseline/01-01-SUMMARY.md`
</output>
