---
phase: 01-contract-and-security-baseline
plan: 03
type: execute
wave: 2
depends_on:
  - 01-01
  - 01-02
files_modified:
  - cobalt-docker.sh
  - README.md
  - AGENTS.md
autonomous: true
requirements:
  - SEC-02
  - DOC-01
user_setup: []
must_haves:
  truths:
    - REST API host publish is localhost-scoped by default unless explicitly overridden.
    - Documentation and agent contract match implemented runtime defaults and validation commands.
  artifacts:
    - cobalt-docker.sh
    - README.md
    - AGENTS.md
  key_links:
    - README and AGENTS references reflect launcher default exposure behavior.
    - Validation commands in docs are runnable and aligned to script behavior.
---

<objective>
Finalize secure-default exposure and documentation-contract alignment for Phase 1 completion.

Purpose: Ensure operators and contributors have one consistent source of truth for default exposure and validation.
Output: Runtime/doc contract parity for secure defaults and verification commands.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/STATE.md
@.planning/phases/01-contract-and-security-baseline/01-CONTEXT.md
@.planning/phases/01-contract-and-security-baseline/01-RESEARCH.md
@.planning/phases/01-contract-and-security-baseline/01-01-PLAN.md
@.planning/phases/01-contract-and-security-baseline/01-02-PLAN.md

@cobalt-docker.sh
@README.md
@AGENTS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Confirm and harden localhost default publish contract</name>
  <files>cobalt-docker.sh</files>
  <action>Verify REST API publish mapping remains localhost-scoped by default and ensure override behavior is explicit and documented. Do not widen default exposure; keep secure-by-default posture.</action>
  <verify>rg -n "127\.0\.0\.1:\$REST_API_PUBLISH_PORT:\$SERVICE_PORT|REST API will be published" cobalt-docker.sh</verify>
  <done>Launcher default publish path is explicitly localhost-bound and does not silently broaden exposure.</done>
</task>

<task type="auto">
  <name>Task 2: Synchronize README and AGENTS with secure-default runtime behavior</name>
  <files>README.md, AGENTS.md</files>
  <action>Update documentation where needed so default exposure, preflight requirements, and verification commands exactly match implementation. Keep wording concise and operationally actionable.</action>
  <verify>rg -n "127\.0\.0\.1|REST_API_PUBLISH_PORT|Validation Commands|preflight" README.md AGENTS.md</verify>
  <done>Docs accurately describe runtime defaults and validation steps without contradictions.</done>
</task>

<task type="auto">
  <name>Task 3: Run contract sanity checks before phase verification</name>
  <files>cobalt-docker.sh, docker-entrypoint.sh, README.md, AGENTS.md</files>
  <action>Run script syntax checks and a quick contract sanity pass across docs/scripts to ensure phase-level consistency before verification. Record any mismatches for immediate correction.</action>
  <verify>bash -n /opt/Cobalt-Docker/cobalt-docker.sh && bash -n /opt/Cobalt-Docker/docker-entrypoint.sh</verify>
  <done>Syntax checks pass and no known contract mismatches remain for Phase 1 scope.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Secure default publish behavior is preserved and explicit
- [ ] README and AGENTS align with runtime defaults and checks
- [ ] Shell syntax checks pass for launcher and entrypoint
</verification>

<success_criteria>
- Secure exposure defaults are unambiguous and stable.
- Runtime behavior and docs are contract-consistent.
- Phase 1 is ready for execution without additional discovery.
</success_criteria>

<output>
After completion, create `.planning/phases/01-contract-and-security-baseline/01-03-SUMMARY.md`
</output>
