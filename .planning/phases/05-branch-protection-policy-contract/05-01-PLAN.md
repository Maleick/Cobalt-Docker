---
phase: 05-branch-protection-policy-contract
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/milestones/v1.1-branch-protection-policy.md
  - .planning/STATE.md
autonomous: true
requirements:
  - GOV-01
  - GOV-02
user_setup: []
must_haves:
  truths:
    - Protected branch targets for `master` and `release/**` are explicitly documented.
    - Required checks are pinned exactly to runtime reliability job names.
    - Policy matrix is migration-safe with branch protection baseline and ruleset compatibility mapping.
  artifacts:
    - .planning/milestones/v1.1-branch-protection-policy.md
  key_links:
    - Policy matrix rows map each branch target to required checks and merge-gate expectations.
    - Required check names match workflow job names exactly.
---

<objective>
Define the governance baseline contract and branch/check policy matrix for v1.1 Phase 5.

Purpose: satisfy `GOV-01` and `GOV-02` by creating one authoritative policy artifact that can be implemented and audited without ambiguity.
Output: a policy baseline document with target branches, required checks, and compatibility notes.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/STATE.md
@.planning/phases/05-branch-protection-policy-contract/05-RESEARCH.md
@.planning/research/SUMMARY.md
@.github/workflows/runtime-reliability-gates.yml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Phase 5 policy baseline artifact</name>
  <files>.planning/milestones/v1.1-branch-protection-policy.md</files>
  <action>Create a governance policy document for v1.1 with sectioned coverage for branch targeting, required checks, and enforcement assumptions.</action>
  <verify>test -f .planning/milestones/v1.1-branch-protection-policy.md</verify>
  <done>Policy baseline file exists and is ready for matrix population.</done>
</task>

<task type="auto">
  <name>Task 2: Define protected branch scope contract</name>
  <files>.planning/milestones/v1.1-branch-protection-policy.md</files>
  <action>Document explicit protected branch targets (`master`, `release/**`) with intended governance coverage and non-goals.</action>
  <verify>rg -n "master|release/\*\*|Protected Branch Scope" .planning/milestones/v1.1-branch-protection-policy.md</verify>
  <done>Branch scope is explicit and maps to GOV-01.</done>
</task>

<task type="auto">
  <name>Task 3: Pin required-check matrix</name>
  <files>.planning/milestones/v1.1-branch-protection-policy.md .github/workflows/runtime-reliability-gates.yml</files>
  <action>Define required checks exactly as workflow job names and add a matrix mapping branch targets to required checks.</action>
  <verify>rg -n "runtime-reliability / syntax-checks|runtime-reliability / shell-regression-suite|runtime-reliability / secret-scan" .planning/milestones/v1.1-branch-protection-policy.md .github/workflows/runtime-reliability-gates.yml</verify>
  <done>Check names are pinned exactly and mapped to branch targets (GOV-02).</done>
</task>

<task type="auto">
  <name>Task 4: Add hybrid surface compatibility notes</name>
  <files>.planning/milestones/v1.1-branch-protection-policy.md</files>
  <action>Add compatibility section mapping branch-protection baseline controls to equivalent ruleset concepts without changing implementation scope.</action>
  <verify>rg -n "Ruleset Compatibility|branch protection baseline|migration" .planning/milestones/v1.1-branch-protection-policy.md</verify>
  <done>Hybrid governance framing is documented without expanding into Phase 6 scope.</done>
</task>

<task type="auto">
  <name>Task 5: Record baseline completion in state</name>
  <files>.planning/STATE.md</files>
  <action>Update state context to capture completion of policy baseline and indicate that review/merge contract definition is next.</action>
  <verify>rg -n "Phase 5|policy baseline|05-02" .planning/STATE.md</verify>
  <done>STATE reflects baseline completion and next plan focus.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Policy artifact exists and includes explicit protected branch scope.
- [ ] Required checks exactly match workflow job names.
- [ ] Hybrid compatibility notes are present without scope expansion.
- [ ] STATE references progression to 05-02.
</verification>

<success_criteria>
- GOV-01 and GOV-02 are satisfied at contract-definition level.
- Policy matrix is explicit enough for repeatable implementation and audit.
</success_criteria>

<output>
After completion, create `.planning/phases/05-branch-protection-policy-contract/05-01-SUMMARY.md`
</output>
